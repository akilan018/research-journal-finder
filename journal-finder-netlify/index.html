<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Research Journal Finder</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@500;700&display=swap"
    rel="stylesheet" />
  <script src="https://unpkg.com/lucide@latest"></script>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <link rel="icon" type="image/png" href="svg.webp" />
  <style>
    .check-label,
    .custom-checkbox {
      display: flex;
      align-items: center;
      gap: 8px;
    }
  </style>
</head>

<body>
  <header class="app-header">
    <div class="header-inner">
      <div class="header-left">
        <div class="logo-box"><i data-lucide="book-open-check"></i></div>
      </div>
      <div class="header-center">
        <h1>RESEARCH JOURNAL FINDER</h1>
      </div>
      <div class="header-right">
        <button onclick="openAddModal()" class="add-btn" title="Add New Journal"><i data-lucide="plus"></i> <span>Add
            Journal</span></button>
        <button onclick="window.location.reload()" class="refresh-btn" title="Refresh Page"><i
            data-lucide="rotate-cw"></i> <span>Reset</span></button>
        <div class="file-upload-wrapper" style="display:none;"><input type="file" id="fileInput" accept=".xlsx, .xls"
            onchange="handleFileUpload(this)" /></div>
      </div>
    </div>
  </header>

  <div class="app-container">
    <section class="search-section">
      <div class="search-panel">
        <div class="search-main">
          <div class="search-type-wrapper">
            <select id="searchType" class="search-select" onchange="updatePlaceholder(); clearSearchInput()">
              <option value="journal">Journal Name</option>
              <option value="issn">ISSN (Numbers Only)</option>
              <option value="area">Area of Interest</option>
              <option value="subscription">Subscription Budget</option>
              <option value="aim">Keywords / Abstract</option>
              <option value="publisher">Publisher</option>
              <option value="country">Country</option>
            </select>
            <i data-lucide="chevron-down" class="select-arrow"></i>
          </div>
          <div class="divider-vertical"></div>
          <div class="input-wrapper" style="position: relative;">
            <i data-lucide="search" class="search-icon"></i>
            <input id="searchInput" type="text" placeholder="Type area (e.g. Bio, Comp)..." autocomplete="off"
              oninput="handleSearchInput(event)" onkeyup="handleEnterKey(event)" />
            <button id="clearSearchBtn" class="clear-input-btn" onclick="clearSearchInput()" title="Clear Search"><i
                data-lucide="x"></i></button>
            <div id="searchSuggestions" class="suggestions-box"></div>
          </div>
          <button onclick="applySearch()" class="btn-search">Search</button>
        </div>
        <div class="search-options">
          <div class="sort-control">
            <i data-lucide="arrow-up-down" class="sort-icon"></i>
            <span class="label">Sort By:</span>
            <select id="sortType" onchange="applyFilters()">
              <option value="">Relevance (Default)</option>
              <option value="az">Name (A-Z)</option>
              <option value="za">Name (Z-A)</option>
              <option value="ifHigh">Impact Factor (High)</option>
              <option value="ifLow">Impact Factor (Low)</option>
              <option value="accHigh">Acceptance Rate (High)</option>
              <option value="accLow">Acceptance Rate (Low)</option>
              <option value="timeFast">Review Time (Fastest)</option>
            </select>
          </div>
        </div>
      </div>
    </section>

    <div class="mobile-controls">
      <button onclick="toggleFilters()" class="btn-mobile-filter"><i data-lucide="sliders-horizontal"></i> Advanced
        Filters</button>
    </div>

    <div class="content-layout">
      <div class="sidebar-backdrop" onclick="toggleFilters()" id="backdrop"></div>
      <aside class="sidebar" id="filterPanel">
        <div class="sidebar-header">
          <h3>Filters</h3><button class="close-btn-mobile" onclick="toggleFilters()"><i data-lucide="x"></i></button>
        </div>
        <div class="sidebar-scroll">

          <div class="filter-group">
            <div class="filter-title"><i data-lucide="award"></i> Impact & Quality</div>
            <div class="checkbox-list">
              <label class="custom-checkbox"><input type="checkbox" id="highImpactFilter"
                  onchange="applyFilters()" /></label>
              <label class="custom-checkbox"><input type="checkbox" value="Q1" class="q-filter"
                  onchange="applyFilters()" /><span class="checkmark"></span> Q1 (Top Tier)</label>
              <label class="custom-checkbox"><input type="checkbox" value="Q2" class="q-filter"
                  onchange="applyFilters()" /><span class="checkmark"></span> Q2 (High Quality)</label>
              <label class="custom-checkbox"><input type="checkbox" value="Q3" class="q-filter"
                  onchange="applyFilters()" /><span class="checkmark"></span> Q3 (Standard)</label>
              <label class="custom-checkbox"><input type="checkbox" value="Q4" class="q-filter"
                  onchange="applyFilters()" /><span class="checkmark"></span> Q4 (Emerging)</label>
            </div>
          </div>

          <div class="filter-group">
            <div class="filter-title"><i data-lucide="database"></i> Indexing Stature</div>
            <div class="checkbox-list">
              <label class="custom-checkbox"><input type="checkbox" value="sci" class="idx-filter"
                  onchange="applyFilters()" /><span class="checkmark"></span> SCI / SCIE</label>
              <label class="custom-checkbox"><input type="checkbox" value="annexure" class="idx-filter"
                  onchange="applyFilters()" /><span class="checkmark"></span> Annexure</label>
              <label class="custom-checkbox"><input type="checkbox" value="non" class="idx-filter"
                  onchange="applyFilters()"><span class="checkmark"></span> Non-Indexing</label>
            </div>
          </div>

          <div class="filter-group">
            <div class="filter-title"><i data-lucide="lock-open"></i> Access Mode</div>
            <div class="checkbox-list">
              <label class="custom-checkbox"><input type="checkbox" value="hybrid" class="mode-filter"
                  onchange="applyFilters()" /><span class="checkmark"></span> Hybrid Mode</label>
              <label class="custom-checkbox"><input type="checkbox" value="gold" class="oa-filter"
                  onchange="applyFilters()" /><span class="checkmark"></span> Gold Open Access</label>
              <label class="custom-checkbox"><input type="checkbox" value="diamond" class="oa-filter"
                  onchange="applyFilters()" /><span class="checkmark"></span> Diamond OA</label>
              <label class="custom-checkbox"><input type="checkbox" id="subFilter" onchange="applyFilters()" /><span
                  class="checkmark"></span> Subscription Only</label>
            </div>
          </div>

          <div class="filter-group" id="subjectFilterGroup">
            <div class="filter-title"><i data-lucide="book-marked"></i> Subject Area</div>
            <div style="padding: 0 10px 10px 10px;">
              <input type="text" id="areaFilterSearch" placeholder="Filter subjects..." oninput="filterAreaCheckboxes()"
                style="width: 100%; padding: 6px; border: 1px solid #cbd5e1; border-radius: 4px; font-size: 13px;">
            </div>
            <div class="checkbox-list scrollable-list" id="subjectCheckboxList"></div>
          </div>

        </div>
        <button class="btn-reset" onclick="clearAllFilters()">
          <i data-lucide="rotate-ccw"></i> Reset Filters
        </button>
      </aside>
      <main class="results-area">
        <div id="resultHeader" class="results-header">
          <h2 id="resultCount">Loading data...</h2>
        </div>
        <div class="results-grid" id="results"></div>
      </main>
    </div>
  </div>

  <div id="addModal" class="modal-overlay">
    <div class="modal-box">
      <div class="modal-header">
        <h3>Add New Journal</h3><button onclick="closeAddModal()" class="modal-close"><i data-lucide="x"></i></button>
      </div>
      <div class="modal-body">
        <div class="form-grid">
          <div class="form-group full-width"><label>Journal Name *</label><input type="text" id="newJName" /></div>
          <div class="form-group full-width"><label>Subject Area *</label><input type="text" id="newJArea" /></div>
          <div class="form-group"><label>Publisher</label><input type="text" id="newJPub" /></div>
          <div class="form-group"><label>ISSN</label><input type="text" id="newJIssn" /></div>
          <div class="form-group"><label>Country</label><input type="text" id="newJCountry" /></div>
          <div class="form-group"><label>Publication Duration</label><input type="text" id="newJTime" /></div>
          <div class="form-group"><label>Impact Factor</label><input type="number" step="0.1" id="newJImpact" /></div>
          <div class="form-group"><label>Acceptance Rate (%)</label><input type="number" id="newJAcc" /></div>
          <div class="form-group"><label>Cost (USD)</label><input type="number" id="newJUSD" /></div>
          <div class="form-group"><label>Cost (INR)</label><input type="number" id="newJINR" /></div>
          <div class="form-group"><label>Editor</label><input type="text" id="newJEditor" /></div>
          <div class="form-group"><label>Co-Editor</label><input type="text" id="newJCoEditor" /></div>
          <div class="form-group">
            <label>Open Access Type</label>
            <select id="newJOA">
              <option value="">None</option>
              <option value="Gold">Gold</option>
              <option value="Diamond">Diamond</option>
              <option value="Green">Green</option>
            </select>
          </div>

          <div class="full-width" style="margin-top: 10px;">
            <label style="display:block; margin-bottom: 8px; font-size: 13px; font-weight: 600; color: #64748b;">Journal
              Rankings</label>
            <div class="form-checks" style="display: flex; gap: 15px; flex-wrap: wrap;">
              <label class="check-label"><input type="checkbox" id="newJQ1"> Q1</label>
              <label class="check-label"><input type="checkbox" id="newJQ2"> Q2</label>
              <label class="check-label"><input type="checkbox" id="newJQ3"> Q3</label>
              <label class="check-label"><input type="checkbox" id="newJQ4"> Q4</label>
            </div>
          </div>

          <div class="full-width" style="margin-top: 15px;">
            <label
              style="display:block; margin-bottom: 8px; font-size: 13px; font-weight: 600; color: #64748b;">Indexing &
              Access</label>
            <div class="form-checks"
              style="display: grid; grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); gap: 12px;">
              <label class="check-label"><input type="checkbox" id="newJSCI"> SCI</label>
              <label class="check-label"><input type="checkbox" id="newJAnnex"> Annexure</label>
              <label class="check-label"><input type="checkbox" id="newJHybrid"> Hybrid</label>
              <label class="check-label"><input type="checkbox" id="newJNon"> Non-Index</label>
              <label class="check-label"><input type="checkbox" id="newJSub"> Subscription</label>
            </div>
          </div>
          <div class="form-group full-width"><label>Aim & Scope</label><textarea id="newJAim" rows="3"
              class="form-textarea"></textarea></div>
          <div class="form-group full-width"><label>Guidelines</label><textarea id="newJGuide" rows="3"
              class="form-textarea"></textarea></div>
        </div>
      </div>
      <div class="modal-footer"><button onclick="saveNewJournal()" class="btn-save">Save Journal</button></div>
    </div>
  </div>

  <script src="script.js"></script>
  <script>
    lucide.createIcons();
    function toggleFilters() {
      document.getElementById("filterPanel").classList.toggle("open");
      document.getElementById("backdrop").classList.toggle("open");
      document.body.classList.toggle("no-scroll");
    }
    function updatePlaceholder() {
      const t = document.getElementById("searchType").value;
      const i = document.getElementById("searchInput");
      document.getElementById("searchSuggestions").innerHTML = "";
      if (t === 'area') i.placeholder = "Type area (e.g. Bio, Comp)...";
      else if (t === 'issn') i.placeholder = "e.g., 1234-5678 (Numbers only)";
      else if (t === 'subscription') i.placeholder = "e.g., 400 (Numbers only)";
      else i.placeholder = "Type search term...";
    }
  </script>
</body>

</html>